import{o as h,n as v,j as e,E as f,u as C,r as x}from"./vendor-e59bfd4a.js";import{u as w,F as g,E as r,H as m,D as I,B as c,I as S,y as k,k as T,J as L,K as y,M as b}from"./index-51b49a5b.js";const p=h(({title:s,dropdownLabel:i,buttons:o,onDownloadClick:t,type:n})=>{const{logsStore:a}=w(),l=v(),u=d=>{a.setSearchTerm(d.target.value)};return e.jsxs(g,{className:r.headingRow,justifyContent:"space-between",flexWrap:"wrap",children:[a.isCluster&&o&&o.length>1?e.jsxs(g,{children:[e.jsx(m,{className:r.pr2,variant:"h2",title:`${i}:`}),e.jsx(I,{className:r.dropdown,color:"neutral",size:"medium",buttons:o,active:s})]}):a.isCluster?e.jsx(m,{variant:"h2",title:i?`${i}: ${s}`:s,className:r.mb2}):e.jsxs(g,{alignItems:"center",spacing:1,children:[n==="session"&&e.jsx(c.UI,{onClick:()=>l(-1),children:e.jsx(S,{name:"arrow_back"})}),e.jsx(m,{variant:"h2",title:s,className:r.mb2})]}),e.jsxs(g,{spacing:2,alignItems:"center",children:[n!=="audit"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{icon:"zoom_out",onClick:()=>{a.adjustFontSize(-.1)}}),e.jsx(c,{icon:"zoom_in",onClick:()=>{a.adjustFontSize(.1)}})]}),e.jsx(c,{icon:"cloud_download",onClick:t}),!a.filterToggle&&e.jsx(c,{color:"neutral",icon:"search",onClick:()=>a.setFilterToggle()}),a.filterToggle&&e.jsx(k,{value:a.searchTerm,onChange:u,onClose:()=>a.setFilterToggle()})]})]})}),E=h(()=>{var d,j;const{logsStore:s,globalStore:i}=w(),{type:o,app:t,id:n,spId:a}=f(),{t:l}=C(),u=()=>{b(s.logsOverview).isEmpty()?s.loadLogsOverview(t,!1).then(()=>{s.refresh(t||"",o||"")}):s.refresh(t||"",o||"")};return T(l("routes.logs")+" - "+o),x.useEffect(()=>{i.updateApp(t)},[t]),x.useEffect(()=>(s.setSearchTerm(""),s.setFilterToggle(!1),s.setType(o||""),o==="session"&&t&&n?(s.setInstanceId(n),s.setSessionSpLogId(a||"")):s.setInstanceId(""),u(),()=>s.clearInterval()),[o,n,a]),e.jsxs("div",{className:r.root,children:[((d=s.type)==null?void 0:d.url)==="admin"&&e.jsx(p,{title:l("logs.adminConsoleMessages"),type:o||"",onDownloadClick:()=>s.downloadLogs(o||"")}),(o==="audit"||o==="server")&&e.jsx(p,{title:s.isCluster?s.serverLogId:l(`logs.${o}Messages`),buttons:s.dropdownServerButtons,dropdownLabel:l("logs.clusterServer"),type:o||"",onDownloadClick:()=>s.downloadLogs(o||"")}),((j=s.type)==null?void 0:j.url)==="sessionpool"&&e.jsx(p,{title:s.spLogId,buttons:s.dropdownSpButtons,dropdownLabel:l("logs.sp"),type:o||"",onDownloadClick:()=>s.downloadLogs(o||"")}),o==="session"&&n&&e.jsx(p,{back:!0,title:l("logs.appInst")+" "+n+" "+l("logs.msgs"),type:o||"",onDownloadClick:()=>s.downloadSessionLogs(L("",t||""),s.spLogId||"",n||"")}),e.jsx(y,{type:o,app:t,id:n})]})});export{E as default};
