import{o as S,r as g,u as y,j as e,c as v}from"./vendor-e59bfd4a.js";import{u as R,k,F as m,g as h,K as A,a3 as d,a0 as C,Q as B}from"./index-51b49a5b.js";import{C as V}from"./Config-072d6dfc.js";const w="_btnstab_aee03_1",N="_headerRow_aee03_5",F="_rightSpace_aee03_11",I="_floatingButtons_aee03_15",E="_activeApply_aee03_28",T="_root_aee03_32",t={btnstab:w,headerRow:N,rightSpace:F,floatingButtons:I,activeApply:E,root:T},H=S(()=>{var b;const{permissionsStore:_,globalStore:x,scalingStore:s,logsStore:u}=R(),[i,p]=g.useState("logs"),{t:f,i18n:o}=y();g.useEffect(()=>(s.loadConfig(),x.updateApp(""),c(i),()=>{s.clearConfigData()}),[]);const c=g.useCallback(l=>{p(l),l==="logs"?u.refresh("/","scaling"):u.clearInterval()},[p]);return k(o.t("routes.scaling")),e.jsxs(e.Fragment,{children:[e.jsx(m,{className:t.headerRow,justifyContent:"space-between",alignItems:"center",children:e.jsxs(m,{className:t.btnstab,children:[e.jsx(h,{className:t.rightSpace,icon:"list",active:i==="logs",onClick:()=>c("logs"),children:f("scaling.logs")}),e.jsx(h,{className:t.rightSpace,icon:"timer",active:i==="config",onClick:()=>c("config"),children:f("scaling.config")})]})}),i==="logs"&&e.jsx(e.Fragment,{children:e.jsx(A,{className:t.tableHeight,type:"scaling",app:"/"})}),i==="config"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{identify:"scalingConfig",value:s.config,readonly:!_.get("configEdit"),translations:(b=o.getDataByLanguage(o.language))==null?void 0:b.translation,lang:o.language,cssClass:t.root,elementId:"scalingConfig",onRequestUpdate:()=>{s.onRequestUpdate()},onConfigChange:()=>{s.compareConfig()},onVariableSearch:(l,r)=>{const a=r.substr(r.lastIndexOf("$")),n=a.substr(0,0)+a.substr(2);return d.getVariables(l,n)},onVariableResolve:(l,r)=>d.resolveVariable(l,r).then(a=>{if(!a)return"";let n="";if(Object.keys(a).length>1){n+='<ul class="var-res-list">';for(const j in a)n+="<li>"+C(j)+"</li>";n+="</ul>"}else n+=C(Object.keys(a)[0]);return n})}),e.jsx(B,{className:v(t.floatingButtons,{[t.activeApply]:s.activeApply}),buttons:[{label:o.t("Apply"),size:"small",color:"blue",onClick:()=>s.setConfig()},{label:o.t("Reset"),size:"small",color:"white",onClick:()=>s.resetConfig()}]})]})]})});export{H as default};
